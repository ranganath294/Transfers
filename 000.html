function addRowHighlighting() {
    const rows = document.querySelectorAll('.phase-row');
    
    rows.forEach(row => {
        row.addEventListener('mouseenter', () => {
            // Get current row's data attributes
            const spName = row.getAttribute('data-sp-name');
            const team = row.getAttribute('data-team');
            const phase = row.getAttribute('data-phase');
            const rowIndex = parseInt(row.getAttribute('data-row-index'));
            
            // Highlight the current row
            row.classList.add('highlighted-team');
            
            // Find and highlight all related rows up to the current one
            document.querySelectorAll('.phase-row').forEach(otherRow => {
                const otherRowIndex = parseInt(otherRow.getAttribute('data-row-index'));
                if (otherRowIndex <= rowIndex && 
                    otherRow.getAttribute('data-sp-name') === spName && 
                    otherRow.getAttribute('data-team') === team && 
                    otherRow.getAttribute('data-phase') === phase) {
                    otherRow.classList.add('highlighted-team');
                }
            });
            
            // Highlight SP cell
            const spCells = document.querySelectorAll('[data-sp-cell="true"]');
            spCells.forEach(spCell => {
                if (spCell.textContent.trim().includes(spName)) {
                    spCell.classList.add('highlighted-team');
                    
                    // Find all rows under this SP up to the current row
                    const spRows = document.querySelectorAll(`.phase-row[data-sp-name="${spName}"]`);
                    spRows.forEach(spRow => {
                        const spRowIndex = parseInt(spRow.getAttribute('data-row-index'));
                        if (spRowIndex <= rowIndex) {
                            // Highlight cells in the hierarchy path
                            const cells = spRow.querySelectorAll('td');
                            cells.forEach(cell => {
                                if (cell.hasAttribute('data-sp-cell') || 
                                    cell.hasAttribute('data-team-cell') || 
                                    cell.textContent.trim() === phase) {
                                    cell.classList.add('highlighted-team');
                                }
                            });
                        }
                    });
                }
            });
            
            // Highlight team cells in the path
            const teamCells = document.querySelectorAll('[data-team-cell="true"]');
            teamCells.forEach(teamCell => {
                if (teamCell.textContent.trim() === team) {
                    const teamRow = teamCell.closest('tr');
                    const teamRowIndex = parseInt(teamRow.getAttribute('data-row-index'));
                    if (teamRowIndex <= rowIndex && 
                        teamRowIndex + parseInt(teamCell.rowSpan) > rowIndex) {
                        teamCell.classList.add('highlighted-team');
                        
                        // Highlight phase cells in the path
                        const phaseRows = document.querySelectorAll(`.phase-row[data-team="${team}"]`);
                        phaseRows.forEach(phaseRow => {
                            const phaseRowIndex = parseInt(phaseRow.getAttribute('data-row-index'));
                            if (phaseRowIndex <= rowIndex) {
                                const phaseCells = phaseRow.querySelectorAll('td');
                                phaseCells.forEach(cell => {
                                    if (cell.textContent.trim() === phase) {
                                        cell.classList.add('highlighted-team');
                                    }
                                });
                            }
                        });
                    }
                }
            });
        });
        
        row.addEventListener('mouseleave', () => {
            // Remove highlight class from all elements
            document.querySelectorAll('.highlighted-team').forEach(el => {
                el.classList.remove('highlighted-team');
            });
        });
    });
}








.highlighted-team {
    background-color: rgba(0, 123, 255, 0.15) !important;
    transition: background-color 0.2s ease;
}

.phase-row:hover {
    background-color: rgba(0, 123, 255, 0.1);
}


