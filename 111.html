function updateRowWithNewData(deviceData) {
    const row = document.getElementById(`device-row-${deviceData.id}`);
    
    // Update each cell with new data
    Object.entries(deviceData).forEach(([key, value]) => {
        const cell = row.querySelector(`[id*="${key}"]`);
        if (cell) {
            if (value === "default") {
                return; // Skip updating this cell if the value is "default"
            }

            if (key === 'current_user') {
                const userTextEl = cell.querySelector('.current-user-text');
                const availabilityCell = document.getElementById(`availability-${deviceData.id}`);
                const assignedDateCell = document.getElementById(`assigned-date-${deviceData.id}`);

                if (userTextEl) {
                    // Case 1: No user assigned (empty string or default)
                    if (!value || value === 'default') {
                        userTextEl.textContent = '';
                        availabilityCell.textContent = 'Available';
                        assignedDateCell.textContent = '';
                    } 
                    // Case 2: User assigned
                    else {
                        userTextEl.textContent = value;
                        availabilityCell.textContent = 'In Use';
                        
                        // Get current date in YYYY-MM-DD format
                        const currentDate = new Date().toISOString().split('T')[0];
                        assignedDateCell.textContent = currentDate;
                    }
                }
            } else {
                cell.textContent = value;
            }
        }
    });
}