function validateInput(input) {
    const value = input.value.trim();
    const datatype = input.dataset.datatype;
    const validationMessage = document.getElementById(`${input.name}-validation`);

    // If validation message element doesn't exist, create it
    let messageElement = validationMessage;
    if (!messageElement) {
        messageElement = document.createElement('div');
        messageElement.className = 'invalid-feedback';
        messageElement.id = `${input.name}-validation`;
        input.parentNode.insertBefore(messageElement, input.nextSibling);
    }

    // Check for intentionally empty value with quotes
    if (value === '""') {
        input.classList.remove('is-invalid');
        input.classList.add('is-valid');
        messageElement.style.display = 'none';
        return true;
    }

    // Check if field is empty (not intentionally empty)
    if (!value) {
        input.classList.add('is-invalid');
        input.classList.remove('is-valid');
        messageElement.textContent = 'This field is required. Use "" for empty value.';
        messageElement.style.display = 'block';
        return false;
    }

    try {
        switch (datatype) {
            case 'str':
                if (value.includes('"') || value.includes("'")) {
                    throw new Error('Quotes are only allowed as "" to indicate empty value');
                }
                break;
                
            case 'list':
                if (value.includes('"') || value.includes("'") || value.includes('[') || value.includes(']')) {
                    throw new Error('Use comma-separated values without quotes/brackets, or "" for empty list');
                }
                break;
                
            case 'dict':
                if (value.includes('""')) {
                    throw new Error('Use {} for empty object, not ""');
                }
                JSON.parse(value);
                break;
                
            case 'bool':
                if (!['true', 'false'].includes(value.toLowerCase())) {
                    throw new Error('Value must be true or false');
                }
                break;
                
            case 'int':
                if (!Number.isInteger(Number(value))) {
                    throw new Error('Value must be a whole number, or "" for null');
                }
                break;
                
            case 'float':
                if (isNaN(Number(value))) {
                    throw new Error('Value must be a number, or "" for null');
                }
                break;
        }
        
        input.classList.remove('is-invalid');
        input.classList.add('is-valid');
        messageElement.style.display = 'none';
        return true;
    } catch (error) {
        input.classList.remove('is-valid');
        input.classList.add('is-invalid');
        messageElement.textContent = error.message;
        messageElement.style.display = 'block';
        return false;
    }
}