// Function to update the download SP report item
function updateDownloadDropdownButton() {
    isSpReportChecked = document.getElementById('spReport').checked
    console.log("updateDownloadDropdownButton Called and spReport: ", isSpReportChecked)
    if (isSpReportChecked) {
        const downloadDropdown = document.getElementById('downloadDropdown');

        const exportCoverageReportLink = document.getElementById('exportCoverageReport');
        // const exportCRVerificationLink = document.getElementById('exportCRVerification');
        const exportScrumSheetLink = document.getElementById('exportScrumSheet');
        const downloadSPReportLink = document.getElementById('downloadSPReport');

        const spSelect = document.getElementById('sp_name');
        const selectedSp = spSelect.value;
        const selectedTeam = document.querySelector('input[name="team-filter"]:checked').value;
        const selectedPhaseButton = document.querySelector('.sp-report-phase-filter.active');
        const selectedPhase = selectedPhaseButton ? selectedPhaseButton.getAttribute('data-phase') : 'ES';

        downloadDropdown.style.display = 'block';

        exportCoverageReportLink.textContent = `${selectedSp} ${selectedTeam} ${selectedPhase} Daily Coverage Report`;
        // exportCRVerificationLink.textContent = `${selectedSp} ${selectedTeam} ${selectedPhase} Report`;
        exportScrumSheetLink.textContent = `${selectedSp} ${selectedTeam} ${selectedPhase} Daily Scrum CRs`;
        downloadSPReportLink.textContent = `${selectedSp} ${selectedTeam} ${selectedPhase} Report PPT`;
    } else {
        downloadDropdown.style.display = 'none';
    }
}


// Common download function
document.getElementById('exportCoverageReport').addEventListener('click', function(e) {
    e.preventDefault();
    downloadReport('coverage_report');
});

/*
document.getElementById('exportCRVerification').addEventListener('click', function(e) {
    e.preventDefault();
    downloadReport('cr_verification_data');
});
*/

document.getElementById('exportScrumSheet').addEventListener('click', function(e) {
    e.preventDefault();
    downloadReport('scrum_sheet');
});

document.getElementById('downloadSPReport').addEventListener('click', function(e) {
    e.preventDefault();
    downloadReport('sp_report');
});


